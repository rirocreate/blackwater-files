<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Blackwater Files</title>
<link rel="icon" type="image/png" href="icon.png">
<style>
/* ===== GLOBAL ===== */
html, body { margin:0; padding:0; width:100%; height:100%; overflow:hidden; font-family:"Helvetica",sans-serif; background:black; }
.game-container { width:100vw; height:100vh; overflow:hidden; position:relative; }

/* INTERFACES */
.interface { width:100%; height:100%; position:absolute; top:0; left:100%; transition:left 0.5s ease, opacity 0.5s ease; display:flex; flex-direction:column; overflow-y:auto; padding:0; background-size:cover; opacity:0; }
.interface.active { left:0; opacity:1; }
.nav-arrow { position:absolute; bottom:10px; width:40px; height:40px; opacity:0.8; cursor:pointer; z-index:20; background-size:cover; }
.nav-arrow.left { left:10px; }
.nav-arrow.right { right:10px; }

/* STATUS BAR */
#status-bar { position:absolute; top:0; left:0; width:100%; height:25px; display:flex; justify-content:space-between; align-items:center; padding:0 8px; z-index:100; background:rgba(0,0,0,0.6); }
#status-bar #time { color:white; font-size:12px; }
#status-icons img { display:inline-block; vertical-align:middle; }

/* INTRO SCREEN */
#intro-screen {
  position:absolute; top:0; left:0; width:100%; height:100%;
  background:black; color:white; display:flex;
  flex-direction:column; justify-content:center; align-items:center;
  text-align:center; opacity:1; transition:opacity 1s;
  z-index:200;
}
#intro-screen h1 { font-size:28px; margin-bottom:20px; }
#intro-screen p { font-size:16px; margin:6px 0; max-width:80%; }
#intro-screen ul { list-style:none; padding:0; }
#intro-screen ul li { margin:5px 0; }

/* PHONE */
#phone-interface { background:url('backgrounds/phone-bg.jpg') no-repeat center/cover; }
#home-screen { display:flex; flex-wrap:wrap; justify-content:space-around; align-content:flex-start; padding:10px; }
.app-icon { width:60px; height:60px; margin:10px; border-radius:15px; cursor:pointer; background-size:cover; }
.app-window { position:absolute; top:25px; left:0; width:100%; height:calc(100% - 25px); display:none; flex-direction:column; overflow-y:auto; padding:10px; z-index:10; border-radius:0; background-size:cover; text-align:center; }
.app-window.active { display:flex; }
.back-btn, .reset-btn { background:#007aff; color:#fff; border:none; padding:8px 12px; border-radius:10px; margin-bottom:10px; cursor:pointer; }

/* MESSAGES */
#chat .message { padding:10px 14px; border-radius:20px; max-width:80%; margin:6px auto; word-wrap:break-word; background:#e0e0ff; opacity:0; transition: opacity 0.5s ease; text-align:center; }

/* BUREAU */
#bureau-interface { background:url('backgrounds/bureau-bg.jpg') no-repeat center/cover; }
.bureau { display:flex; flex-wrap:wrap; justify-content:center; align-items:center; padding:15px; }
.photo { width:100px; height:100px; margin:10px; border:2px solid #ccc; border-radius:8px; cursor:pointer; }

/* ORDINATEUR */
#ordi-interface { background:url('backgrounds/ordi-bg.jpg') no-repeat center/cover; }
.ordinateur { background: rgba(240,240,240,0.9); border-radius:15px; padding:10px; flex:1; overflow-y:auto; text-align:center; }
.window { background:#fff; border:2px solid #666; padding:10px; border-radius:10px; margin:8px 0; cursor:pointer; }

/* ICONS */
.app-icon[data-app="messenger"] { background-image:url('icons/messenger.png'); }
.app-icon[data-app="instafaux"] { background-image:url('icons/instafaux.png'); }
.app-icon[data-app="twitfake"] { background-image:url('icons/twitfake.png'); }
.app-icon[data-app="web"] { background-image:url('icons/web.png'); }
.app-icon[data-app="notes"] { background-image:url('icons/notes.png'); }
.app-icon[data-app="mailfaux"] { background-image:url('icons/mail.png'); }
.app-icon[data-app="calendar"] { background-image:url('icons/calendar.png'); }
.app-icon[data-app="photos"] { background-image:url('icons/photos.png'); }
.app-icon[data-app="mapsfake"] { background-image:url('icons/maps.png'); }
.app-icon[data-app="contacts"] { background-image:url('icons/contacts.png'); }
.app-icon[data-app="todo"] { background-image:url('icons/todo.png'); }
.app-icon[data-app="appstorefake"] { background-image:url('icons/appstore.png'); }
.app-icon[data-app="settings"] { background-image:url('icons/settings.png'); }

/* FL√àCHES */
.nav-arrow.left { background-image:url('icons/left-arrow.png'); }
.nav-arrow.right { background-image:url('icons/right-arrow.png'); }

/* TRANSITIONS */
#day-transition, #mini-game-screen { transition:opacity 1s; }

/* ANIMATIONS */
.app-icon:hover { transform:scale(1.1); transition:transform 0.2s ease; }
@keyframes intro-fade { 0% {opacity:0; transform:scale(0.9);} 100% {opacity:1; transform:scale(1);} }
.intro-animate { animation:intro-fade 1s ease forwards; }
</style>
</head>
<body>

<div class="game-container">

<!-- √âcran intro -->
<div id="intro-screen" class="intro-animate">
  <h1>The Blackwater Files</h1>
  <p>Tu es sur le point d‚Äôentrer dans l‚Äôenqu√™te de Blackwater.</p>
  <p>Objectif : Collecter les indices et comprendre la v√©rit√©.</p>
  <p>Il existe 3 fins possibles :</p>
  <ul>
    <li>Fin R√©veil üïäÔ∏è</li>
    <li>Fin V√©rit√© Totale üî•</li>
    <li>Fin Silence üï≥Ô∏è</li>
  </ul>
  <button id="start-game-btn">Iniziate</button>
</div>

<!-- Transitions -->
<div id="day-transition"></div>
<div id="mini-game-screen"></div>

<!-- Fl√®ches -->
<div class="nav-arrow left"></div>
<div class="nav-arrow right"></div>

<!-- PHONE -->
<div class="interface active" id="phone-interface">
  <!-- Status Bar -->
  <div id="status-bar">
    <div id="time">12:00</div>
    <div id="status-icons">
      <img id="signal-icon" src="icons/signal.png">
      <img id="wifi-icon" src="icons/wifi.png">
      <img id="battery-icon" src="icons/battery-full.png">
    </div>
  </div>

  <div id="home-screen">
    <div class="app-icon" data-app="messenger"></div>
    <div class="app-icon" data-app="instafaux"></div>
    <div class="app-icon" data-app="twitfake"></div>
    <div class="app-icon" data-app="web"></div>
    <div class="app-icon" data-app="notes"></div>
    <div class="app-icon" data-app="mailfaux"></div>
    <div class="app-icon" data-app="calendar"></div>
    <div class="app-icon" data-app="photos"></div>
    <div class="app-icon" data-app="mapsfake"></div>
    <div class="app-icon" data-app="contacts"></div>
    <div class="app-icon" data-app="todo"></div>
    <div class="app-icon" data-app="appstorefake"></div>
    <div class="app-icon" data-app="settings"></div>
  </div>

  <!-- Apps -->
  <div class="app-window" id="messenger"><button class="back-btn">üè† Accueil</button><div id="chat"></div></div>
  <div class="app-window" id="instafaux"><button class="back-btn">üè† Accueil</button><div id="insta-content"></div></div>
  <div class="app-window" id="twitfake"><button class="back-btn">üè† Accueil</button><div id="twit-content"></div></div>
  <div class="app-window" id="web"><button class="back-btn">üè† Accueil</button><div id="web-content"></div></div>
  <div class="app-window" id="notes"><button class="back-btn">üè† Accueil</button><div id="notes-content"></div></div>
  <div class="app-window" id="mailfaux"><button class="back-btn">üè† Accueil</button><div id="mail-content"></div></div>
  <div class="app-window" id="calendar"><button class="back-btn">üè† Accueil</button><div id="calendar-content"></div></div>
  <div class="app-window" id="photos"><button class="back-btn">üè† Accueil</button><div id="photos-content"></div></div>
  <div class="app-window" id="mapsfake"><button class="back-btn">üè† Accueil</button><div id="maps-content"></div></div>
  <div class="app-window" id="contacts"><button class="back-btn">üè† Accueil</button><div id="contacts-content"></div></div>
  <div class="app-window" id="todo"><button class="back-btn">üè† Accueil</button><div id="todo-content"></div></div>
  <div class="app-window" id="appstorefake"><button class="back-btn">üè† Accueil</button><div id="appstore-content"></div></div>
  <div class="app-window" id="settings"><button class="back-btn">üè† Accueil</button><button class="reset-btn">üîÑ Recommencer le jeu</button></div>
</div>

<!-- BUREAU -->
<div class="interface" id="bureau-interface">
  <div class="bureau">
    <h3 style="color:#fff;">Bureau d'ado</h3>
    <div class="photo" onclick="collectFile(); alert('Indice trouv√© !')"><img src="bureau/photo1.jpg" style="width:100px;"></div>
    <div class="photo" onclick="collectSymbol('‚òø')"><img src="bureau/note1.jpg" style="width:100px;"></div>
    <div class="photo" onclick="collectSymbol('üúç')"><img src="bureau/objet1.png" style="width:100px;"></div>
  </div>
</div>

<!-- ORDI -->
<div class="interface" id="ordi-interface">
  <div class="ordinateur">
    <h3>Ordinateur</h3>
    <div class="ordi-content" id="ordi-content">
      <div class="window" onclick="collectFile(); alert('Fichier ouvert !')">
        <h4>Dossier adoption</h4>
        <p>Contenu du fichier Blackwater‚Ä¶</p>
      </div>
    </div>
  </div>
</div>

</div>

<audio id="bg-music" loop autoplay>
  <source src="calme.mp3" type="audio/mp3">
</audio>

<script>
// ===== NAVIGATION =====
let interfaces=['phone-interface','bureau-interface','ordi-interface'], currentInterface=0;
function showInterface(index){interfaces.forEach((id,i)=>{document.getElementById(id).classList.remove('active');if(i===index) document.getElementById(id).classList.add('active');});}
document.querySelector('.nav-arrow.left').addEventListener('click',()=>{currentInterface=(currentInterface-1+interfaces.length)%interfaces.length;showInterface(currentInterface);});
document.querySelector('.nav-arrow.right').addEventListener('click',()=>{currentInterface=(currentInterface+1)%interfaces.length;showInterface(currentInterface);});

// ===== START GAME =====
document.getElementById('start-game-btn').addEventListener('click',()=>{
  const intro = document.getElementById('intro-screen');
  intro.style.transition = 'opacity 1s';
  intro.style.opacity=0;
  setTimeout(()=>{
    intro.style.display='none';
    const phone = document.getElementById('phone-interface');
    phone.style.left='0';
    phone.style.opacity=1;
    startStory();
  },1000);
});

// ===== HEURE =====
function updateTime(){
  const now=new Date();
  let hours=now.getHours().toString().padStart(2,'0');
  let mins=now.getMinutes().toString().padStart(2,'0');
  document.getElementById('time').textContent=`${hours}:${mins}`;
}
setInterval(updateTime,60000);
updateTime();

// ===== BATTERIE =====
if(navigator.getBattery){
  navigator.getBattery().then(function(battery){
    function updateBattery(){
      const level=Math.floor(battery.level*100);
      document.getElementById('battery-icon').src=level>50?'icons/battery-full.png':(level>20?'icons/battery-medium.png':'icons/battery-low.png');
    }
    updateBattery();
    battery.addEventListener('levelchange',updateBattery);
  });
}

// ===== OPEN APPS =====
document.querySelectorAll('.app-icon').forEach(icon=>{
  icon.addEventListener('click',()=>{
    const appId=icon.dataset.app;
    document.getElementById(appId).classList.add('active');
    document.getElementById('home-screen').style.opacity='0';
  });
});
document.querySelectorAll('.back-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    btn.parentElement.classList.remove('active');
    document.getElementById('home-screen').style.opacity='1';
  });
});
document.querySelector('.reset-btn').addEventListener('click',()=>{if(confirm("Voulez-vous recommencer le jeu ?")) location.reload();});

// ===== STORY =====
let infoCount=0, day=1, storyIndex=0, symbolFound=0, pcFilesFound=0, gameEnded=false;
const chat=document.getElementById('chat'), bgMusic=document.getElementById('bg-music');
const storyInfos=[ "Prologue : If you‚Äôre reading this‚Ä¶", "üì© 23:41 - Evan Cross‚Ä¶", "Une photo sombre‚Ä¶", "üì© 23:43 - Evan‚Ä¶", "üéôÔ∏è Audio transcription‚Ä¶", "Respiration rapide‚Ä¶", "üìÇ Premier dossier‚Ä¶", "üì© 00:02 - Evan‚Ä¶", "C‚Äôest votre maison‚Ä¶", "If you‚Äôre still reading‚Ä¶ vous √™tes dedans‚Ä¶" ];

function addMessage(text){
  const div = document.createElement('div');
  div.className='message';
  div.style.opacity=0;
  div.textContent=text;
  chat.appendChild(div);
  let op=0;
  const fade = setInterval(()=>{
    op+=0.05;
    div.style.opacity=op;
    if(op>=1) clearInterval(fade);
  },50);
  infoCount++;
  if(infoCount%10===0){day++; showDayTransition(day); setTimeout(startMiniGame,2000);}
  checkEnding();
}
function startStory(){setInterval(()=>{if(storyIndex<storyInfos.length) addMessage(storyIndex++);},4000);}

// ===== MINI GAMES =====
const miniGames=[ {type:'number', question:'Choisis un chiffre entre 1 et 5', answer:'3'}, {type:'symbol', question:'Quel symbole est cach√© ?', answer:'‚òø'}, {type:'riddle', question:'Devine la devinette‚Ä¶', answer:'respiration'}, {type:'word', question:'Compl√®te la phrase: "Blackwater ..."', answer:'est'}];
function startMiniGame(){const div=document.getElementById('mini-game-screen'); div.style.opacity=1; const game=miniGames[Math.floor(Math.random()*miniGames.length)]; div.innerHTML=`<p>${game.question}</p><input id="mini-answer" type="text"><button onclick="checkMiniGame('${game.answer}')">Valider</button>`;}
function checkMiniGame(correct){const ans=document.getElementById('mini-answer').value.trim(); if(ans.toLowerCase()===correct.toLowerCase()){alert("‚úÖ Correct !");} else {alert("‚ùå Incorrect, mais tu continues.");} document.getElementById('mini-game-screen').style.opacity=0;}

// ===== COLLECT INDICES =====
function collectSymbol(sym){symbolFound++; alert(`üîé Symbole ${sym} trouv√© ! (${symbolFound}/20)`); checkEnding();}
function collectFile(){pcFilesFound++; alert(`üìÇ Fichier PC trouv√© ! (${pcFilesFound}/10)`); checkEnding();}

// ===== FINS =====
function checkEnding(){if(gameEnded) return; if(day>=100 || (symbolFound>=20 && pcFilesFound>=10)){gameEnded=true; if(symbolFound>=15 && pcFilesFound>=5){bgMusic.src='reveal.mp3'; bgMusic.play(); alert("üïäÔ∏è Fin R√©veil !");} else if(symbolFound>=20 && pcFilesFound>=10){bgMusic.src='truth.mp3'; bgMusic.play(); alert("üî• Fin V√©rit√© Totale !");} else{bgMusic
